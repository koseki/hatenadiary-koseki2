
*RailsSvn*[Rails] Rails の定数に SVN のリビジョン番号を設定する。

config/environment.rb の末尾に以下を追加した。

>|ruby|
SVNVERSION = %x{svnversion #{RAILS_ROOT}}.sub(/^$/,"NA")
||<

- 最新の状態で起動しているか。
- 複数のアプリケーションやサーバが、同じリビジョンで動いてるか。
- 起動時に作業ディレクトリに変更が加えられていなかったか(リビジョン番号にMが付く)。
- いつからいつまでどのリビジョンで動いてたか。ログにマーカーを入れる。

等の確認に使う。

- svnversion コマンドが見つからなかったら "NA"。
- %x{} は nil じゃなく空文字列を返す。
- ローカル変数を使いたくなかったので、空文字列を置換した。
- もっとシンプルに書くには？
